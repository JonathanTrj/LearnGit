<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>File Input</title>

	<link href="/static/css/bootstrap.min.css" media="all" rel="stylesheet" type="text/css">
	<link href="/static/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
	<link href="/static/css/fontawesome.css" media="all" rel="stylesheet" type="text/css">
	<link href="/static/themes/explorer-fas/theme.css" media="all" rel="stylesheet" type="text/css"/>
	<script src="/static/js/jquery.min.js"></script>
	<script src="/static/js/fileinput.min.js"></script>
	<script src="/static/js/bootstrap.min.js"></script>
	<script src="/static/themes/fas/theme.js" type="text/javascript"></script>
    <script src="/static/themes/explorer-fas/theme.js" type="text/javascript"></script>
</head>
<body>
	<div class="container-fluid">
		<div class="row">
			<div align="center" class="col">
				<div class="py-5 px-4" style="width: 71%;">
					<input id="inputid" type="file" name="uploadfiles[]" class="file-loading" multiple>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
        $("#inputid").fileinput(
            {
                theme: 'fas',
                showUpload: true,
                browseOnZoneClick: true,
                maxFileCount: 0,
                allowedFileExtensions:['txt','csv'],
                uploadUrl:'#',

                allowedPreviewTypes:['text'],
                layoutTemplates: {
                    actionUpload: '',
                    actionZoom: ''
                },
                preferIconicPreview: true, // 开启用图标替换预览效果
                preferIconicZoomPreview: true,
                previewFileIconSettings: { // configure your icon file extensions
                    'doc': '<i class="fas fa-file-word"></i>',
                    'xls': '<span class=""><i class="fas fa-file-excel"></i></span>',
                    'ppt': '<i class="fas fa-file-powerpoint"></i>',
                    'pdf': '<i class="fas fa-file-pdf"></i>',
                    'zip': '<i class="fas fa-file-archive"></i>',
                    'code': '<i class="fas fa-file-code"></i>',
                    'mov': '<i class="fas fa-file-video"></i>',
                    'mp3': '<i class="fas fa-file-audio"></i>',
                    'img': '<i class="fas fa-file-image"></i>'
                },
                previewFileExtSettings: {
                    'doc': function(ext) {
                        return ext.match(/(doc|docx)$/i);
                    },
                    'xls': function(ext) {
                        return ext.match(/(txt|ini|csv|xls|xlsx)$/i);
                    },
                    'ppt': function(ext) {
                        return ext.match(/(ppt|pptx)$/i);
                    },
                    'zip': function(ext) {
                        return ext.match(/(zip|rar|tar|gzip|gz|7z)$/i);
                    },
                    'mov': function(ext) {
                        return ext.match(/(avi|mpg|mkv|mov|mp4|3gp|webm|wmv)$/i);
                    },
                    'mp3': function(ext) {
                        return ext.match(/(mp3|wav)$/i);
                    },
                    'code': function(ext) {
                        return ext.match(/(java|php|js|css|htm|html|py|cpp|h|spyc)$/i);
                    },
                    'img': function(ext) {
                        return ext.match(/(jpg|png)$/i);
                    }
                }
            }
        ).on('fileuploaderror', function(event, data, msg) {
            var form = data.form;
            var files = data.files;
            var extra = data.extra;
            var response = data.response;
            var reader = data.reader;
            console.log(files);
            // 获取信息
            alert(msg);
        });
	</script>
</body>
</html>